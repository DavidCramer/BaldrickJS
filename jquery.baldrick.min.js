/* BaldrickJS  V2.01 | (C) David Cramer - 2013 | MIT License */
!function(a){a.fn.baldrick=function(){this.removeClass("trigger").addClass("_tisBound");var b={};arguments.length&&(b=arguments[0]);for(var c in baldrickHelper)"function"==typeof baldrickHelper[c]&&baldrickHelper[c](this);return this.each(function(){var c=a(this),d=c.data("event")?c.data("event"):"click";return c.on(d,function(e){if(c.data("for")){var f=a(c.data("for")),g=a.extend({},c.data());return delete g.for,f.data(g),f.trigger(f.data("event")?f.data("event"):d)}if((c.data("before")?"function"==typeof window[c.data("before")]?window[c.data("before")](this,e):!0:!0)!==!1){var h=c.data("callback")?"function"==typeof window[c.data("callback")]?window[c.data("callback")]:c.data("callback"):b.callback?b.callback:!1,i=c.data("request")?c.data("request"):b.request?b.request:h,j=c.data("target")?a(c.data("target")).length<1?a("<span>"):a(c.data("target")):h?h:c,k=c.data("targetInsert")?c.data("targetInsert"):"html",l=c.data("loadClass")?c.data("loadClass"):"loading",m=c.data("activeClass")?c.data("activeClass"):"active",n=c.data("activeElement")?a(c.data("activeElement")):c,o=c.data("loadElement")?a(c.data("loadElement")):j,p=c.data("cache")?a(c.data("cache")):!1;switch(typeof i){case"function":return e.preventDefault(),i(this,e),void 0;case"boolean":return i;case"string":if("function"==typeof window[i])return window[i](c[0],e);h="boolean"==typeof h?function(){}:h}e.preventDefault(),c.data("group")?a('._tisBound[data-group="'+c.data("group")+'"]').removeClass(m):a("._tisBound:not([data-group])").removeClass(m),n.addClass(m),"function"!=typeof o&&"string"!=typeof o&&o.addClass(l);var r,q=c.serializeArray();if(q.length){var s=[];a.each(c.data(),function(a,b){s.push({name:a,value:b})}),r=a.extend(s,q)}else r=a.param(c.data());if(a.ajaxSetup({cache:p}),(c.data("templateUrl")||c.data("template"))&&"object"==typeof Handlebars)if(c.data("template")){var t=a(c.data("template")).html(),u=Handlebars.compile(t);a.getJSON(i,r,function(a,b,d){return j.html(u(a)),j.parent().find(".trigger").baldrick(),o.removeClass(l),h(a,{trigger:c[0],target:j[0]},b,d)})}else c.data("templateUrl")&&a.get(c.data("templateUrl"),function(b){var d=Handlebars.compile(b);a.getJSON(i,r,function(a,b,e){return j.html(d(a)),j.parent().find(".trigger").baldrick(),o.removeClass(l),h(a,{trigger:c[0],target:j[0]},b,e)})});else"string"==typeof h?a.getScript(i,function(a,b,d){return"function"==typeof window[h]?window[h](a,{trigger:c[0],target:j[0]},b,d):!0}):a.post(i,r,function(b,d,e){return"function"!=typeof j&&"string"!=typeof j&&(a(j)[k](b),a(j).parent().find(".trigger").baldrick(),o.removeClass(l)),h(b,{trigger:c[0],target:j[0]},d,e)})}}),(c.data("autoload")||c.data("poll"))&&(c.data("delay")?setTimeout(function(a,b){return a.trigger(b)},c.data("delay"),c,d):c.trigger(d)),c.data("poll")&&(c.data("delay")?setTimeout(function(a,b){return setInterval(function(a,b){return a.trigger(b)},a.data("poll"),a,b)},c.data("delay")):setInterval(function(a,b){return a.trigger(b)},c.data("poll"),c,d)),this})}}(jQuery);