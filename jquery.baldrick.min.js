/* BaldrickJS  V2.01 | (C) David Cramer - 2013 | MIT License */
!function(a){a.fn.baldrick=function(){this.removeClass(this.selector.split(".")[1]).addClass("_tisBound");var b={},c=this.selector;if(arguments.length&&(b=arguments[0]),"undefined"!=typeof baldrickHelper)for(var d in baldrickHelper)"function"==typeof baldrickHelper[d]&&baldrickHelper[d](this);return this.each(function(){var d=a(this),e=d.data("event")?d.data("event"):"click";return d.on(e,function(f){if(d.data("for")){var g=a(d.data("for")),h=a.extend({},d.data());return delete h.for,g.data(h),g.trigger(g.data("event")?g.data("event"):e)}if((d.data("before")?"function"==typeof window[d.data("before")]?window[d.data("before")](this,f):!0:!0)!==!1){var i=d.data("callback")?"function"==typeof window[d.data("callback")]?window[d.data("callback")]:d.data("callback"):b.callback?b.callback:!1,j=d.data("request")?d.data("request"):b.request?b.request:i,k=d.data("target")?a(d.data("target")).length<1?a("<span>"):a(d.data("target")):i?i:d,l=d.data("targetInsert")?d.data("targetInsert"):"html",m=d.data("loadClass")?d.data("loadClass"):"loading",n=d.data("activeClass")?d.data("activeClass"):"active",o=d.data("activeElement")?a(d.data("activeElement")):d,p=d.data("loadElement")?a(d.data("loadElement")):k,q=d.data("cache")?a(d.data("cache")):!1;switch(typeof j){case"function":return f.preventDefault(),j(this,f),void 0;case"boolean":return j;case"string":if("function"==typeof window[j])return window[j](d[0],f);i="boolean"==typeof i?function(){}:i}f.preventDefault(),d.data("group")?a('._tisBound[data-group="'+d.data("group")+'"]').each(function(){var b=a(this),c=a(this).data("activeElement")?a(a(this).data("activeElement")):b;c.removeClass(b.data("activeClass")?b.data("activeClass"):n)}):a("._tisBound:not([data-group])").each(function(){var b=a(this),c=a(this).data("activeElement")?a(a(this).data("activeElement")):b;c.removeClass(b.data("activeClass")?b.data("activeClass"):n)}),o.addClass(n),"function"!=typeof p&&"string"!=typeof p&&p.addClass(m);var s,r=d.serializeArray();if(r.length){var t=[];a.each(d.data(),function(a,b){t.push({name:a,value:b})}),s=a.extend(t,r)}else s=a.param(d.data());if(a.ajaxSetup({cache:q}),(d.data("templateUrl")||d.data("template"))&&"object"==typeof Handlebars)if(d.data("template")){var u=a(d.data("template")).html(),v=Handlebars.compile(u);a.getJSON(j,s,function(a,b,e){return k.html(v(a)),k.parent().find(c).baldrick(),p.removeClass(m),i(a,{trigger:d[0],target:k[0]},b,e)})}else d.data("templateUrl")&&a.get(d.data("templateUrl"),function(b){var e=Handlebars.compile(b);a.getJSON(j,s,function(a,b,f){return k.html(e(a)),k.parent().find(c).baldrick(),p.removeClass(m),i(a,{trigger:d[0],target:k[0]},b,f)})});else"string"==typeof i?a.getScript(j,function(a,b,c){return"function"==typeof window[i]?window[i](a,{trigger:d[0],target:k[0]},b,c):!0}):"string"==typeof s&&"function"!=typeof k?k.load(j,s,function(b,d,e){return a(k).parent().find(c).baldrick(),p.removeClass(m),i(b,d,e)}):a.post(j,s,function(b,e,f){return"function"!=typeof k&&"string"!=typeof k&&(a(k)[l](b),a(k).parent().find(c).baldrick(),p.removeClass(m)),i(b,{trigger:d[0],target:k[0]},e,f)})}}),(d.data("autoload")||d.data("poll"))&&(d.data("delay")?setTimeout(function(a,b){return a.trigger(b)},d.data("delay"),d,e):d.trigger(e)),d.data("poll")&&(d.data("delay")?setTimeout(function(a,b){return setInterval(function(a,b){return a.trigger(b)},a.data("poll"),a,b)},d.data("delay")):setInterval(function(a,b){return a.trigger(b)},d.data("poll"),d,e)),this})}}(jQuery);