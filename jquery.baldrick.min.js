/* BaldrickJS  V2 | (C) David Cramer - 2013 | MIT License */
!function(a){a.fn.baldrick=function(){return this.removeClass("trigger").addClass("_tisBound").removeClass("mine yours"),this.each(function(){var b=a(this),c=b.data("event")?b.data("event"):"click";return b.on(c,function(d){if(b.data("for"))return a(b.data("for")).trigger(c);if((b.data("before")?"function"==typeof window[b.data("before")]?window[b.data("before")](this,d):!0:!0)!==!1){var e=b.data("callback")?"function"==typeof window[b.data("callback")]?window[b.data("callback")]:!1:!1,f=b.data("request")?b.data("request"):e,g=b.data("target")?a(b.data("target")).length<1?a("<span>"):a(b.data("target")):b,h=b.data("loadClass")?b.data("loadClass"):"loading",i=b.data("activeClass")?b.data("activeClass"):"active",j=b.data("activeElement")?a(b.data("activeElement")):b,k=b.data("loadElement")?a(b.data("loadElement")):g;switch(typeof f){case"function":return d.preventDefault(),f(this,d),void 0;case"boolean":return f;case"string":e="boolean"==typeof e?function(){}:e}d.preventDefault(),b.data("group")?a('._tisBound[data-group="'+b.data("group")+'"]').removeClass(i):a("._tisBound:not([data-group])").removeClass(i),j.addClass(i),k.addClass(h);var m,l=b.serializeArray();if(l.length){var n=[];a.each(b.data(),function(a,b){n.push({name:a,value:b})}),m=a.extend(n,l)}else m=a.param(b.data());if(b.data("template")&&"object"==typeof Handlebars){var o=a(b.data("template")).html(),p=Handlebars.compile(o);a.getJSON(f,m,function(b,c,d){return g.html(p(b)),a(this).parent().find(".trigger").baldrick(),k.removeClass(h),e(b,c,d)})}else g.load(f,m,function(b,c,d){return a(this).parent().find(".trigger").baldrick(),k.removeClass(h),e(b,c,d)})}}),(b.data("autoload")||b.data("poll"))&&(b.data("delay")?setTimeout(function(a,b){return a.trigger(b)},b.data("delay"),b,c):b.trigger(c)),b.data("poll")&&(b.data("delay")?setTimeout(function(a,b){return setInterval(function(a,b){return a.trigger(b)},a.data("poll"),a,b)},b.data("delay")):setInterval(function(a,b){return a.trigger(b)},b.data("poll"),b,c)),this})},a(".trigger").baldrick()}(jQuery);